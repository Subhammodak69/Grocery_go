<!DOCTYPE html>
<html lang="en">
{% load static %}
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{% block title %}Admin Dashboard{% endblock %}</title>
  <!-- Bootstrap CSS CDN -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
  <script src="{% static 'js/base.js' %}"></script>
  <style>
    body, html {
      height: 100%;
      font-family: Arial, sans-serif;
    }
    .sidebar {
      height: 100vh;
      background: #1e293b; /* dark slate background */
      transition: width 0.3s ease;
      overflow-x: hidden;
    }
    .sidebar.collapsed {
      width: 0px !important;
    }
    .sidebar-header {
      color:white;
      font-weight: 600;
      font-size: 1rem;
      padding: 1rem;
      border-bottom: 1px solid #334155;
      align-items: center;
    }
    .sidebar-menu .nav-link {
      color:white;
      text-transform: capitalize;
      padding: 10px 1.5rem;
      border-bottom: 1px solid #334155;
      transition: background-color 0.2s ease;
    }
    .sidebar-menu .nav-link:hover,
    .sidebar-menu .nav-link.active {
      background-color: #2563eb; /* blue highlight */
    }
    .sidebar.collapsed .nav-link span {
      display: none;
    }
    .sidebar.collapsed .sidebar-header span:first-child {
      display: none;
    }

    .toggle-btn {
      font-size: 1.5rem;
      cursor: pointer;
    }

    .content-area {
      flex-grow: 1;
      height: 100vh;
      overflow-y: auto;
    }
    .topbar {
      height: 60px;
      border-bottom: 1px solid #ddd;
      background: #1abc9c;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 1rem;
    }
    .logout-icon {
      cursor: pointer;
      font-size: 1.3rem;
    }
    .show {
      display: block !important;
    }
    .hide {
      display: none !important;
    }
    i.bi {
      text-shadow: 1px 1px 0 currentColor,
                  -1px 1px 0 currentColor;
    }



    /* loader css */
.spinner {
  border: 8px solid #f3f3f3;
  border-top: 8px solid #3498db; /* blue color */
  border-radius: 50%;
  width: 60px;
  height: 60px;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}
#loaderdiv {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: rgba(255, 255, 255, 0.4); 
  backdrop-filter: blur(2px); 
  -webkit-backdrop-filter: blur(2px); 
  z-index: 9999; 
  align-items: center;
  user-select: none; 
  pointer-events: auto;
}
.hh{
  cursor:pointer;
}
  </style>
</head>
<body>
  <!-- Loader HTML -->
  <div id="loaderdiv">
    <div id="loader" style="position: fixed; top:50%; left:50%; transform: translate(-50%, -50%);">
      <div class="spinner"></div>
    </div>
  </div>
  <div class="d-flex">
    <nav id="sidebar" class="sidebar d-flex flex-column" style="width: 300px;">
      <div class="sidebar-header d-flex gap-2">
        <div class="d-flex align-items-center justify-content-center" style="height:30px; width:30px; border-radius:50%; background:white;">
          <i class="bi bi-person" style="color:black;font-size:larger;"></i>
        </div>
        <span>{{user.get_full_name}}</span>(Admin)
      </div>
      <div class="sidebar-menu flex-grow-1 nav flex-column">
        <a href="#" class="nav-link active"><span>Dashboard</span></a>
      </div>
    </nav>

    <div class="content-area d-flex flex-column flex-grow-1">
      <header class="topbar d-flex justify-content-between align-items-center">
        <span class="toggle-btn" id="toggleSidebar">&#9776;</span>
        <h1>Dashboard</h1>
        <div class="d-flex align-items-center hh">
          <i id="on" class="bi bi-toggle-on fs-3 d-none " onclick="change_color('on')"></i>
          <i id="off" class="bi bi-toggle-off fs-3 " onclick="change_color('off')"></i>
          <i class="bi bi-power fs-4 mx-4 " onclick="logout()"></i>
        </div>
      </header>
      <main class="flex-grow-1 p-4">
       {% block content %}


       {% endblock %}
      </main>
    </div>
  </div>

  <!-- Bootstrap JS and dependencies -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    const toggleBtn = document.getElementById('toggleSidebar');
    const sidebar = document.getElementById('sidebar');

    toggleBtn.addEventListener('click', () => {
      sidebar.classList.toggle('collapsed');
      if (sidebar.classList.contains('collapsed')) {
        sidebar.style.width = '0px';
      } else {
        sidebar.style.width = '300px';
      }
    });

    function change_color(value) {
      const body = document.body;
      const on = document.getElementById('on');
      const off = document.getElementById('off');
      if (value === "on") {
        body.style.background = 'white';
        on.classList.add('hide');
        on.classList.remove('show');
        off.classList.add('show');
        off.classList.remove('hide');
      } else {
        body.style.background = '#272727ed';
        on.classList.add('show');
        on.classList.remove('hide');
        off.classList.add('hide');
        off.classList.remove('show');
      }
    }

  </script>
</body>
</html>
