<!DOCTYPE html>
<html lang="en">
{% load static %}
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{% block title %}Admin Dashboard{% endblock %}</title>
  <!-- Bootstrap CSS CDN -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
  <link rel="stylesheet" href="{% static 'css/admin/admin_base.css' %}" />
  <script src="{% static 'js/admin/admin_base.js' %}"></script>
  <script src="{% static 'js/admin/home.js' %}"></script>
  <script src="{% static 'js/auto_reload.js' %}"></script>
</head>
<body>
  <!-- Loader HTML -->
  <div id="loaderdiv">
    <div id="loader" style="position: fixed; top:50%; left:50%; transform: translate(-50%, -50%);">
      <div class="spinner"></div>
    </div>
  </div>
  <div class="d-flex">
    <nav id="sidebar" class="sidebar d-flex flex-column" style="width: 300px;">
      <div class="sidebar-header d-flex gap-2">
        <div class="d-flex align-items-center justify-content-center" style="height:30px; width:30px; border-radius:50%; background:white;">
          <i class="bi bi-person-fill" style="color:black;font-size:larger;"></i>
        </div>
        <span>{{user.get_full_name}}</span>(Admin)
      </div>
      <div class="sidebar-menu flex-grow-1 nav flex-column">
        <a href="/admin/" class="nav-link d-flex align-items-center">
          <i class="bi bi-speedometer2 me-2"></i>
          <span>Dashboard</span>
        </a>
        <a href="/admin/users/" class="nav-link d-flex align-items-center">
          <i class="bi bi-person-lines-fill me-2"></i>
          <span>Users</span>
        </a>
        <a href="/admin/delivery-workers/" class="nav-link d-flex align-items-center">
          <i class="bi bi-truck-flatbed me-2"></i>
          <span>Workers</span>
        </a>
        <a href="/admin/categories/" class="nav-link d-flex align-items-center">
          <i class="bi bi-grid-3x3-gap-fill me-2"></i>
          <span>Categories</span>
        </a>
        <a href="/admin/posters/" class="nav-link d-flex align-items-center">
          <i class="bi bi-image-alt me-2"></i>
          <span>Posters</span>
        </a>
        <a href="/admin/products/" class="nav-link d-flex align-items-center">
          <i class="bi bi-cart-fill me-2"></i>
          <span>Products</span>
        </a>
        <a href="/admin/orders/" class="nav-link d-flex align-items-center">
          <i class="bi bi-bag-check-fill me-2"></i>
          <span>Orders</span>
        </a>
        <a href="/admin/unassigned/orders/" class="nav-link d-flex align-items-center position-relative">
          <i class="bi bi-exclamation-triangle-fill me-2 text-warning"></i>
          <span>UnAssigned Orders</span>
        </a>
        <a href="/admin/deliveries-or-pickups/" class="nav-link d-flex align-items-center">
          <i class="bi bi-arrow-left-right me-2"></i>
          <span>Delivery Or Pickups</span>
        </a>
        <a href="/admin/exchange-requests/" class="nav-link d-flex align-items-center">
          <i class="bi bi-arrow-repeat me-2"></i>
          <span>Exchange Or Returns</span>
        </a>
        <a href="/admin/unassigned/pickups/" class="nav-link d-flex align-items-center position-relative">
          <i class="bi bi-question-diamond-fill me-2 text-warning"></i>
          <span>UnAssigned Pickups</span>
        </a>
      </div>
    </nav>

    <div class="content-area d-flex flex-column flex-grow-1">
      <header class="topbar d-flex justify-content-between align-items-center">
        <span class="toggle-btn" id="toggleSidebar">&#9776;</span>
        <h1>Dashboard</h1>
        <div class="d-flex align-items-center hh">
          <i id="on" class="bi bi-toggle-on fs-3 d-none " onclick="change_color('on')"></i>
          <i id="off" class="bi bi-toggle-off fs-3 " onclick="change_color('off')"></i>
          <i class="bi bi-power fs-4 mx-4 " onclick="logout()"></i>
        </div>
      </header>
      <main class="flex-grow-1 p-2">
         {% block content %}
         {% endblock %}
      </main>
    </div>
  </div>

  <!-- Bootstrap JS and dependencies -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script>
  window.onload = function() {
    const toggleBtn = document.getElementById('toggleSidebar');
    const sidebar = document.getElementById('sidebar');
    if (toggleBtn && sidebar) {
      toggleBtn.addEventListener('click', function() {
        sidebar.classList.toggle('collapsed');
        sidebar.style.width = sidebar.classList.contains('collapsed') ? '0px' : '300px';
      });
    }
  };

  const currentPath = window.location.pathname;
  const navLinks = document.querySelectorAll('.sidebar-menu .nav-link');
  navLinks.forEach(link => {
      if (link.getAttribute('href') === currentPath) {
          link.classList.add('active');
      }
  });
</script>
</body>
</html>
